jQuery(document).ready(function(a){"use strict";a.wc_geolocation_based_products_admin={runTipTip:function(){a("#tiptip_holder").removeAttr("style"),a("#tiptip_arrow").removeAttr("style"),a(".woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})},reInitRows:function(){a("table.wc-glbp-settings").find("tr.entry").each(function(b){c=String(a("input.wc-glbp-disable",this).prop("name")),d=c.replace(/row\[\d+\]/,"row["+b+"]"),a("input.wc-glbp-disable",this).prop("name",d);var c=String(a("input.wc-glbp-country",this).prop("name")),d=c.replace(/row\[\d+\]/,"row["+b+"]");a("input.wc-glbp-country",this).prop("name",d),c=String(a("input.wc-glbp-region",this).prop("name")),d=c.replace(/row\[\d+\]/,"row["+b+"]"),a("input.wc-glbp-region",this).prop("name",d),c=String(a("input.wc-glbp-city",this).prop("name")),d=c.replace(/row\[\d+\]/,"row["+b+"]"),a("input.wc-glbp-city",this).prop("name",d),c=String(a("input.wc-glbp-products, select.wc-glbp-products",this).prop("name")),d=c.replace(/row\[\d+\]/,"row["+b+"]"),a("input.wc-glbp-products, select.wc-glbp-products",this).prop("name",d),c=String(a("select.wc-glbp-categories",this).prop("name")),d=c.replace(/row\[\d+\]/,"row["+b+"]"),a("select.wc-glbp-categories",this).prop("name",d),c=String(a("select.wc-glbp-show-hide",this).prop("name")),d=c.replace(/row\[\d+\]/,"row["+b+"]"),a("select.wc-glbp-show-hide",this).prop("name",d),c=String(a("input.wc-glbp-test",this).prop("name")),d=c.replace(/row\[\d+\]/,"row["+b+"]"),a("input.wc-glbp-test",this).prop("name",d)}),a.wc_geolocation_based_products_admin.runSortable()},runSortable:function(){a("table.wc-glbp-settings tbody").sortable({opacity:.5,tolerance:"pointer",update:function(b,c){a.wc_geolocation_based_products_admin.reInitRows()}})},init:function(){a("table.wc-glbp-settings").on("click",".wc-glbp-insert-row",function(b){b.preventDefault();var c=a(this).parents("table.wc-glbp-settings"),d="";d+='<tr class="entry">',d+='<td class="wc-glbp-sort"></td>',d+='<td class="wc-glbp-column-remove-row">',d+='<input type="checkbox" value="remove" class="wc-glbp-remove-row-cb" />',d+="</td>",d+='<td class="wc-glbp-column-disable">',d+='<input type="checkbox" name="row[0][disable]" class="wc-glbp-disable" />',d+="</td>",d+='<td class="wc-glbp-column-country">',d+='<input type="text" name="row[0][country]" value="" placeholder="*" maxlength="2" class="wc-glbp-country" />',d+="</td>",d+='<td class="wc-glbp-column-region">',d+='<input type="text" name="row[0][region]" value="" placeholder="*" class="wc-glbp-region" />',d+="</td>",d+='<td class="wc-glbp-column-city">',d+='<input type="text" name="row[0][city]" value="" placeholder="*" class="wc-glbp-city" />',d+="</td>",d+='<td class="wc-glbp-column-product-categories">',d+='<select name="row[0][product_categories][]" class="wc-enhanced-select wc-glbp-categories" multiple="multiple" data-placeholder="'+wc_geolocation_based_products_local.placeholderSelectCategories+'" style="width: 70%;">',d+='<option value=""></option>';var e=a.parseJSON(wc_geolocation_based_products_local.categories);e.length&&a(e).each(function(a,b){d+='<option value="'+b.term_id+'">'+b.name+"</option>"}),d+="</select>",d+="</td>",d+='<td class="wc-glbp-column-products">',wc_geolocation_based_products_local.wc_pre_30?d+='<input type="hidden" class="wc-product-search wc-glbp-products" data-multiple="true" name="row[0][products]" style="width: 100%;" data-placeholder="'+wc_geolocation_based_products_local.placeholderSearchProducts+'" data-action="woocommerce_json_search_products" />':d+='<select class="wc-product-search wc-glbp-products" multiple="multiple" name="row[0][products][]" style="width: 100%;" data-placeholder="'+wc_geolocation_based_products_local.placeholderSearchProducts+'" data-action="woocommerce_json_search_products"><option value=""></option></select>',d+="</td>",d+='<td class="wc-glbp-column-show-hide">',d+='<select name="row[0][show_hide]" class="wc-glbp-show-hide">',d+='<option value="hide">'+wc_geolocation_based_products_local.optionHide+"</option>",d+='<option value="show">'+wc_geolocation_based_products_local.optionShow+"</option>",d+="</select>",d+="</td>",d+='<td class="wc-glbp-column-test">',d+='<input type="checkbox" name="row[0][test]" class="wc-glbp-test" />',d+="</td>",d+="</tr>",c.find("tbody").append(d),a(document.body).trigger("wc-enhanced-select-init"),a.wc_geolocation_based_products_admin.reInitRows()}),a("table.wc-glbp-settings").on("click",".wc-glbp-remove-row",function(b){b.preventDefault();var c=a(this).parents("table.wc-glbp-settings");c.find(".wc-glbp-remove-row-cb:checked").each(function(){1===c.find("tr.entry").length?(c.find(".wc-glbp-remove-row-cb").prop("checked",!1),c.find(".wc-glbp-test").prop("checked",!1),c.find(".wc-glbp-disable").prop("checked",!1),c.find(".wc-glbp-country").val(""),c.find(".wc-glbp-region").val(""),c.find(".wc-glbp-city").val(""),c.find("select.wc-product-search").select2("val",""),c.find("select.wc-enhanced-select").select2("val","")):a(this).parents("tr.entry").eq(0).remove()}),a.wc_geolocation_based_products_admin.reInitRows()}),a("table.wc-glbp-settings").on("click",".wc-glbp-test",function(){return a(this).parents("table.wc-glbp-settings").find(".wc-glbp-test").not(this).prop("checked",!1),!0}),a.wc_geolocation_based_products_admin.runTipTip(),a.wc_geolocation_based_products_admin.runSortable()}},a.wc_geolocation_based_products_admin.init()});